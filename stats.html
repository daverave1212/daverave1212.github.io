<!DOCTYPE html>
<html>
<head>
	<script src = "Javascript/utils.js"></script>
	<script src = "Javascript/scripts.js"></script>
	<script src = "Javascript/Queue.src.js"></script>
	<link rel="stylesheet" href="CSS/globalstyle.css">

<style>
	#StatsTop{
		height: 275px;
		width: 100%;
	}
	#PageTitle{
		margin-top: 15px;
		margin-bototm: 15px;
		color: white;
		font-size: 250%;
		text-align: center;}
	.TopDescription{
		color: white;
		font-size: 150%;
		text-align: center;
		margin-top: 5px;
	}
	#ArrayWrapper{
		width: 300px;
		height: 50px;
		margin-left: auto;
		margin-right: auto;
		margin-top: 7px;
	}
	.ArrayDivision{
		width: 15%;
		height: 50px;
		display: inline-block;
		vertical-align: top;
	}
	.ArrayNumber{
		color: #DDDDDD;
		font-size: 150%;
		color: white;
		text-align: center;
		margin-top: 5px;
	}
	#StatsMid{
		height: 400px;
		width: 100%;
	}
	.MidHalf{
		height: 200px;
		width: 100%;
		//border: solid;
	}
	.StatWrapper{
		width: 32%;
		height: 100%;
		display: inline-block;
	}
	.Stat{
		width: 100px;
		height: 100px;
		margin-top: 50px;
		margin-left: auto;
		margin-right: auto;
		position: relative;
		background-color: #292222;
		//z-index: -200;
	}
	.StatNumber{
		color: #DDDDDD;
		font-size: 400%;
		margin-top: 10px;
		text-align: center;
	}
	.ArrowUp{
		width: 32px;
		height: 32px;
		position: absolute;
		top: 0px;
		right: -36px;
	}
	.ArrowDown{
		width: 32px;
		height: 32px;
		position: absolute;
		bottom: 0px;
		right: -36px;
	}
	.StatName{
		position: absolute;
		top: -40px;
		color: white;
		font-size: 150%;
	}
	#StatNameStrength{ left: 3px;}
	#StatNameConstitution{ left: -15px;}
	#StatNameIntelligence{ left: -15px;}
	#StatNameWisdom{ left: 2px;}
	#StatNameCharisma{ left: -5px; }
	
	
	.StatHelp{
		position: absolute;
		bottom: 0px;
		right: -5px;
	}
	#StatsBot{
		height: 100px;
		width: 100%;
	}
	#NextButton{
		position: absolute;
		right: 20px;
		bottom: 20px;
	}
	

</style>
	
</head>
<body>
<div id = "Wrapper">
	<div id = "Navigation"></div>
	<div id = "WindowWrapper"> <!-- Middle of the page -->
		<div id = "Window" class = "Bordered"> <!-- Smaller panel -->
			<img id = "Settings" onclick = "Scripts.showSettings()" class = "SettingsButton" src = "Images/Interface/settings.png">
			<div id = "SettingsWrapper">
				<div id = "SettingsPane">
				
				</div>
			</div>
			
			<div id = "StatsTop">
				<p id = "PageTitle">Step 1: Choosing your stats</p>
				<p class = "TopDescription">The first step to create a character is choosing your character's stats.</p>
				<p class = "TopDescription">In Call of Heroes, there are 6 basic stats, the ones in the big boxes below.</p>
				<p class = "TopDescription">Complete them with the numbers in the small boxes, arranged any way you like.</p>
				<p class = "TopDescription">(You can change the stat mode or get more info at settings, in the top right corner)</p>
				<div id = "ArrayWrapper">
					<div class = "ArrayDivision"><p class = "ArrayNumber Bordered">-1</p></div>
					<div class = "ArrayDivision"><p class = "ArrayNumber Bordered">0</p></div>
					<div class = "ArrayDivision"><p class = "ArrayNumber Bordered">1</p></div>
					<div class = "ArrayDivision"><p class = "ArrayNumber Bordered">2</p></div>
					<div class = "ArrayDivision"><p class = "ArrayNumber Bordered">3</p></div>
					<div class = "ArrayDivision"><p class = "ArrayNumber Bordered">4</p></div>	
				</div>
			</div>
			<div id = "StatsMid">
				<div class = "MidHalf">
					<div class = "StatWrapper">
						<div id = "Stat-str" name = "str" class = "Stat Bordered">
							<img class = "StatHelp HelpIcon" onmouseover = "handleHelp(this)" onmouseout = "Scripts.hideHelpBox()" src = "Images/Interface/help.png">
							<p class = "StatNumber">0</p>
							<img class = "ArrowUp" 		onclick="increaseStat(this)"	src = "Images/Interface/arrow_up.png">
							<img class = "ArrowDown" 	onclick="decreaseStat(this)"	src = "Images/Interface/arrow_down.png">
							<span id = "StatNameStrength" class = "StatName">Strength</p>
						</div>
					</div>
					<div class = "StatWrapper">
						<div id = "Stat-dex" name = "dex" class = "Stat Bordered">
							<img class = "StatHelp HelpIcon" onmouseover = "handleHelp(this)" onmouseout = "Scripts.hideHelpBox()" src = "Images/Interface/help.png">
							<p class = "StatNumber">0</p>
							<img class = "ArrowUp" 		onclick="increaseStat(this)"	src = "Images/Interface/arrow_up.png">
							<img class = "ArrowDown" 	onclick="decreaseStat(this)"	src = "Images/Interface/arrow_down.png">
							<span id = "StatNameDexterity" class = "StatName">Dexterity</p>
						</div>
					</div>
					<div class = "StatWrapper">
						<div id = "Stat-con" name = "con" class = "Stat Bordered">
							<img class = "StatHelp HelpIcon" onmouseover = "handleHelp(this)" onmouseout = "Scripts.hideHelpBox()" src = "Images/Interface/help.png">
							<p class = "StatNumber">0</p>
							<img class = "ArrowUp" 		onclick="increaseStat(this)"	src = "Images/Interface/arrow_up.png">
							<img class = "ArrowDown" 	onclick="decreaseStat(this)"	src = "Images/Interface/arrow_down.png">
							<span id = "StatNameConstitution" class = "StatName">Constitution</p>
						</div>
					</div>
				</div>
				<div class = "MidHalf">
					<div class = "StatWrapper">
						<div id = "Stat-int" name = "int" class = "Stat Bordered">
							<img class = "StatHelp HelpIcon" onmouseover = "handleHelp(this)" onmouseout = "Scripts.hideHelpBox()" src = "Images/Interface/help.png">
							<p class = "StatNumber">0</p>
							<img class = "ArrowUp" 		onclick="increaseStat(this)"	src = "Images/Interface/arrow_up.png">
							<img class = "ArrowDown" 	onclick="decreaseStat(this)"	src = "Images/Interface/arrow_down.png">
							<span id = "StatNameIntelligence" class = "StatName">Intelligence</p>
						</div>
					</div>
					<div class = "StatWrapper">
						<div id = "Stat-wis" name = "wis" class = "Stat Bordered">
							<img class = "StatHelp HelpIcon" onmouseover = "handleHelp(this)" onmouseout = "Scripts.hideHelpBox()" src = "Images/Interface/help.png">
							<p class = "StatNumber">0</p>
							<img class = "ArrowUp" 		onclick="increaseStat(this)"	src = "Images/Interface/arrow_up.png">
							<img class = "ArrowDown" 	onclick="decreaseStat(this)"	src = "Images/Interface/arrow_down.png">
							<span id = "StatNameWisdom" class = "StatName">Wisdom</p>
						</div>
					</div>
					<div class = "StatWrapper">
						<div id = "Stat-cha" name = "cha" class = "Stat Bordered">
							<img class = "StatHelp HelpIcon" onmouseover = "handleHelp(this)" onmouseout = "Scripts.hideHelpBox()" src = "Images/Interface/help.png">
							<p class = "StatNumber">0</p>
							<img class = "ArrowUp" 		onclick="increaseStat(this)"	src = "Images/Interface/arrow_up.png">
							<img class = "ArrowDown" 	onclick="decreaseStat(this)"	src = "Images/Interface/arrow_down.png">
							<span id = "StatNameCharisma" class = "StatName">Charisma</p>
						</div>
					</div>
				</div>
			</div>
			<div id = "StatsBot">
				<div id = "NextButton" onclick = "next()" class = "Button">Next</div>
			</div>
		</div>
	</div>
</div>
</body>
<script>

	var currentStr = 0;
	var currentDex = 0;
	var currentCon = 0;
	var currentInt = 0;
	var currentWis = 0;
	var currentCha = 0;

	


	function getStatPar(statType){
		var respectiveStatBox = get("Stat-" + statType);
		return respectiveStatBox.getElementsByClassName("StatNumber")[0];}

	function getArrayStatPar(index){
		return getElementsByClass("ArrayNumber")[index];}
	
	function statExists(statNumber){
		if(currentStr == statNumber) return true;
		if(currentDex == statNumber) return true;
		if(currentCon == statNumber) return true;
		if(currentInt == statNumber) return true;
		if(currentWis == statNumber) return true;
		if(currentCha == statNumber) return true;
		return false;}
		
	function handleHelp(callerNode){
		Scripts.showHelpBox();
		var statType = getParent(callerNode).getAttribute("name");
		switch(statType){
		case 'str': Scripts.setHelpText("How physically powerful you are.<br>Strength increases your Athletics skill.<br>It also increases your chance to apply Weapon Effects when attacking."); break;
		case 'dex': Scripts.setHelpText("How agile and acrobatic you are.<br>Dexterity increases your Craft, Sleight of Hand, Stealth and Use Rope skills.<br>It also increases your chance to critically hit in combat!"); break;
		case 'con': Scripts.setHelpText("How physically resilient you are.<br>Constitution increases your Survival skill.<br>It also determines your health and healing skills when resting. More Constitution means more resistance!"); break;
		case 'int': Scripts.setHelpText("How smart and intelligent you are.<br>Intelligence increases your Arcana, Biology, History, Knowledge, Nature and Religion skills.<br>It also provides some Arcane Points, which you can use to reroll dice for spells!"); break;
		case 'wis': Scripts.setHelpText("How keen your senses are.<br>Wisdom increases your Animal Handling, Insight, Investigation and Perception skills.<br>It also increases your ability to resist various negative effects when 'saving'."); break;
		case 'cha': Scripts.setHelpText("How easily you handle yourself in social situations.<br>Charisma increases your Deception, Intimidation, Persuasion and Performance skills.<br>It also affects how easily you can apply certain effects on enemies in combat."); break;}}
	
	function increaseStat(callerNode){
		var statType = getParent(callerNode).getAttribute("name");
		switch(statType){
		case "str":	currentStr++; getStatPar(statType).innerHTML = currentStr; break;
		case "dex":	currentDex++; getStatPar(statType).innerHTML = currentDex; break;
		case "con":	currentCon++; getStatPar(statType).innerHTML = currentCon; break;
		case "int":	currentInt++; getStatPar(statType).innerHTML = currentInt; break;
		case "wis":	currentWis++; getStatPar(statType).innerHTML = currentWis; break;
		case "cha":	currentCha++; getStatPar(statType).innerHTML = currentCha; break;}}
	
	function decreaseStat(callerNode){
		var statType = getParent(callerNode).getAttribute("name");
		switch(statType){
		case "str":	currentStr--; getStatPar(statType).innerHTML = currentStr; break;
		case "dex":	currentDex--; getStatPar(statType).innerHTML = currentDex; break;
		case "con":	currentCon--; getStatPar(statType).innerHTML = currentCon; break;
		case "int":	currentInt--; getStatPar(statType).innerHTML = currentInt; break;
		case "wis":	currentWis--; getStatPar(statType).innerHTML = currentWis; break;
		case "cha":	currentCha--; getStatPar(statType).innerHTML = currentCha; break;}}

	function next(){
		for(var i = -1; i<5; i++){
			if(!statExists(i)){
				alert(i + "Are you sure you put the stats correctly?");
				return;}}
		setParameter("str", currentStr);
		setParameter("dex", currentDex);
		setParameter("con", currentCon);
		setParameter("int", currentInt);
		setParameter("wis", currentWis);
		setParameter("cha", currentCha);
		setParameter("athletics", currentStr);		
		setParameter("acrobatics", currentDex);	
		setParameter("craft", currentDex);			
		setParameter("sleightofhand", currentDex);	
		setParameter("stealth", currentDex);		
		setParameter("userope", currentDex);		
		setParameter("survival", currentCon);		
		setParameter("luck", 0);			
		setParameter("arcana", currentInt);		
		setParameter("biology", currentInt);		
		setParameter("history", currentInt);		
		setParameter("knowledge", currentInt);		
		setParameter("nature", currentInt);		
		setParameter("animalhandling", currentWis);
		setParameter("insight", currentWis);		
		setParameter("investigation", currentWis);	
		setParameter("perception", currentWis);	
		setParameter("religion", currentWis);		
		setParameter("deception", currentCha);		
		setParameter("intimidation", currentCha);	
		setParameter("persuasion", currentCha);	
		setParameter("performance", currentCha);
		window.location.href = "name.html?" + parseParameters();}
		
	function setStatsFromParameters(){
		console.log(Parameters["str"]);
		console.log(Parameters["dex"]);
		console.log(Parameters["int"]);
		console.log(Parameters["wis"]);
		console.log(Parameters["cha"]);
		console.log(Parameters["con"]);
		if(! ("str" in Parameters)) return;
		console.log(parseInt(Parameters["dex"]));
		currentStr = parseInt(Parameters["str"]); getStatPar("str").innerHTML = currentStr;
		currentDex = parseInt(Parameters["dex"]); getStatPar("dex").innerHTML = currentDex;
		currentCon = parseInt(Parameters["con"]); getStatPar("con").innerHTML = currentCon;
		currentInt = parseInt(Parameters["int"]); getStatPar("int").innerHTML = currentInt;
		currentWis = parseInt(Parameters["wis"]); getStatPar("wis").innerHTML = currentWis;
		currentCha = parseInt(Parameters["cha"]); getStatPar("cha").innerHTML = currentCha;
	}
	
	
	// At init
	loadParameters();
	
	setStatsFromParameters();
	
	
	
</script>
</html>





